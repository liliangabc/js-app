parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r},p.cache={};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({"LN/f":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={createStyleSheet:function(e){if(!document.getElementById("gameStyleSheet")){var t=document.createElement("style");t.type="text/css",t.id="gameStyleSheet",t.innerHTML=e,document.head.appendChild(t)}},createCanvas:function(e){e="string"==typeof e&&e?document.querySelector(e):document.body;var t=document.createElement("div"),n=document.createElement("canvas");return t.className="game-wrapper",n.className="game-ui",t.appendChild(n),e.appendChild(t),{wrapper:t,canvas:n}},getPixRatio:function(e){var t=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||1;return(window.devicePixelRatio||1)/t},isFunc:function(e){return"function"==typeof e},getRndInt:function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},imageLoad:function(e){return new Promise(function(t,n){var o=new Image;o.onload=function(){o.onload=null,t(o)},o.onerror=function(e){o.onerror=null,n(new Error("图片加载失败"))},o.src=e})},roundRect:function(e,t,n,o,a,r){o<2*r&&(r=o/2),a<2*r&&(r=a/2),e.beginPath(),e.moveTo(t+r,n),e.arcTo(t+o,n,t+o,n+a,r),e.arcTo(t+o,n+a,t,n+a,r),e.arcTo(t,n+a,t,n,r),e.arcTo(t,n,t+o,n,r),e.closePath()}},t=e;exports.default=t;
},{}],"g65Z":[function(require,module,exports) {
"use strict";function r(r,n){if(!(r instanceof n))throw new TypeError("Cannot call a class as a function")}function n(r,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(r,o.key,o)}}function e(r,e,o){return e&&n(r.prototype,e),o&&n(r,o),r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o=function(){function n(e){r(this,n),this.game=e}return e(n,[{key:"play",value:function(){var r=this,n=null,e=0;return this.game.chessData.forEach(function(o){if(!o.num){var t=r.judge(o);t>e&&(e=t,n=o)}}),n}},{key:"judge",value:function(r){return this.LR(r,1)+this.TB(r,1)+this.RB(r,1)+this.RT(r,1)+100+(this.LR(r,2)+this.TB(r,2)+this.RB(r,2)+this.RT(r,2))}},{key:"getCoords",value:function(r,n){var e=r.row,o=r.col;return this.game.chessData.map(function(r){return{row:r.row,col:r.col,num:r.row===e&&r.col===o?n:r.num}})}},{key:"LR",value:function(r,n){for(var e=0,o=0,t=r.row,u=r.col,i=this.game.rows,a=this.getCoords(r,n),f=t;f>=0;f--){var c=a.find(function(r){return r.row===f&&r.col===u});if(c.num!==n){c.num&&(e+=1);break}o++}for(f=t;f<i;f++){var s=a.find(function(r){return r.row===f&&r.col===u});if(s.num!==n){s.num&&(e+=1);break}o++}return o-=1,this.model(o,e)}},{key:"TB",value:function(r,n){for(var e=0,o=0,t=r.row,u=r.col,i=this.game.cols,a=this.getCoords(r,n),f=u;f>=0;f--){var c=a.find(function(r){return r.col===f&&r.row===t});if(c.num!==n){c.num&&(e+=1);break}o++}for(f=u;f<i;f++){var s=a.find(function(r){return r.col===f&&r.row===t});if(s.num!==n){s.num&&(e+=1);break}o++}return o-=1,this.model(o,e)}},{key:"RB",value:function(r,n){for(var e=0,o=0,t=r.row,u=r.col,i=this.game,a=i.rows,f=i.cols,c=this.getCoords(r,n),s=function(r,t){var u=c.find(function(n){return n.row===r&&n.col===t});if(u.num!==n)return u.num&&(e+=1),l=r,m=t,"break";o++,l=--r,m=--t},l=t,m=u;l>=0&&m>=0;){if("break"===s(l,m))break}for(var v=function(r,t){var u=c.find(function(n){return n.row===r&&n.col===t});if(u.num!==n)return u.num&&(e+=1),h=r,d=t,"break";o++,h=++r,d=++t},h=t,d=u;h<a&&d<f;){if("break"===v(h,d))break}return o-=1,this.model(o,e)}},{key:"RT",value:function(r,n){for(var e=0,o=0,t=r.row,u=r.col,i=this.game,a=i.rows,f=i.cols,c=this.getCoords(r,n),s=function(r,t){var u=c.find(function(n){return n.row===r&&n.col===t});if(u.num!==n)return u.num&&(e+=1),l=r,m=t,"break";o++,l=--r,m=++t},l=t,m=u;l>=0&&m<f;){if("break"===s(l,m))break}for(var v=function(r,t){var u=c.find(function(n){return n.row===r&&n.col===t});if(u.num!==n)return u.num&&(e+=1),h=r,d=t,"break";o++,h=++r,d=--t},h=t,d=u;h<a&&d>=0;){if("break"===v(h,d))break}return o-=1,this.model(o,e)}},{key:"model",value:function(r,n){return 1===r&&1==n?1:2===r?0===n?1500:1===n?1:0:3===r?0==n?4e3:1===n?1500:0:4===r?0===n?1e4:1===n?4e3:0:5===r?1e5:0}}]),n}(),t=o;exports.default=t;
},{}],"Focm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("../utils")),e=i(require("./AIPlayer"));function i(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}var s=function(){function i(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,i),this.callbacks=a,this.canvas=t.default.createCanvas(r).canvas,this.context=this.canvas.getContext("2d"),this.pixRatio=t.default.getPixRatio(this.context),this.rows=this.cols=15,this.updateSize(),this.aiplayer=new e.default(this),this.canvas.addEventListener("click",this.onClick.bind(this))}return a(i,[{key:"initUI",value:function(){this.chessData=this.genInitData(),this.drawUI()}},{key:"updateSize",value:function(){var t=this.canvas.offsetWidth;this.width=this.canvas.width=this.canvas.height=t*this.pixRatio,this.lineWidth=this.pixRatio,this.cellWidth=(this.width-this.lineWidth*this.cols)/this.cols,this.chessRadius=.4*this.cellWidth}},{key:"onClick",value:function(t){var e=this.callbacks.onGameover,i=void 0===e?function(){}:e,n=this.getCurrent(t);if(n){if(n.num=2,this.drawUI(),this.checkResult(n))return setTimeout(i,100,n.num);var r=this.aiplayer.play();r.num=1,this.drawUI(),this.drawActiveAIChess(r),this.checkResult(r)&&setTimeout(i,100,r.num)}}},{key:"checkResult",value:function(t){return this.checkTB(t)||this.checkLR(t)||this.checkZXie(t)||this.checkFXie(t)}},{key:"checkTB",value:function(t){for(var e=0,i=this.chessData.filter(function(e){return e.col===t.col}),n=i.filter(function(e){return e.row<t.row}),r=n.length-1;r>=0&&n[r].num===t.num;r--)e++;n=i.filter(function(e){return e.row>t.row});for(var a=0;a<n.length&&n[a].num===t.num;a++)e++;return e>=4?t.num:0}},{key:"checkLR",value:function(t){for(var e=0,i=this.chessData.filter(function(e){return e.row===t.row}),n=i.filter(function(e){return e.col<t.col}),r=n.length-1;r>=0&&n[r].num===t.num;r--)e++;n=i.filter(function(e){return e.col>t.col});for(var a=0;a<n.length&&n[a].num===t.num;a++)e++;return e>=4?t.num:0}},{key:"checkZXie",value:function(t){for(var e=this,i=0,n=function(n){var r=e.chessData.find(function(e){return e.row===t.row-n&&e.col===t.col+n});if(!r||r.num!==t.num)return"break";i++},r=1;r<5;r++){if("break"===n(r))break}var a=function(n){var r=e.chessData.find(function(e){return e.row===t.row+n&&e.col===t.col-n});if(!r||r.num!==t.num)return"break";i++};for(r=1;r<5;r++){if("break"===a(r))break}return i>=4?t.num:0}},{key:"checkFXie",value:function(t){for(var e=this,i=0,n=function(n){var r=e.chessData.find(function(e){return e.row===t.row-n&&e.col===t.col-n});if(!r||r.num!==t.num)return"break";i++},r=1;r<5;r++){if("break"===n(r))break}var a=function(n){var r=e.chessData.find(function(e){return e.row===t.row+n&&e.col===t.col+n});if(!r||r.num!==t.num)return"break";i++};for(r=1;r<5;r++){if("break"===a(r))break}return i>=4?t.num:0}},{key:"drawGrid",value:function(){var t=this.context,e=this.lineWidth,i=this.rows,n=this.cols,r=this.cellWidth,a=this.width,s=this.chessRadius,o=r+e;t.save(),t.lineWidth=e,t.strokeStyle="#333",t.translate(o/2,o/2),t.beginPath();for(var c=0;c<i;c++)t.moveTo(-e/2,o*c),t.lineTo(a-r-e/2,o*c),t.moveTo(o*c,-e/2),t.lineTo(o*c,a-r-e/2);t.stroke();var u=[{row:3,col:3},{row:3,col:n-4},{row:i-4,col:3},{row:i-4,col:n-4}];t.fillStyle="#000",u.forEach(function(e){t.beginPath(),t.arc(o*e.col,o*e.row,.24*s,0,2*Math.PI),t.fill()}),t.restore()}},{key:"drawUI",value:function(){var t=this.context,e=this.width,i=this.chessRadius,n=this.chessData;t.clearRect(0,0,e,e),this.drawGrid(),t.save(),n.forEach(function(e){e.num&&(t.fillStyle=1===e.num?"#fff":"#000",t.beginPath(),t.arc(e.x,e.y,i,0,2*Math.PI),t.fill())}),t.restore()}},{key:"drawActiveAIChess",value:function(t){var e=t.x,i=t.y,n=this.chessRadius,r=this.context;r.save(),r.fillStyle="#ccc",r.beginPath(),r.arc(e,i,.7*n,0,2*Math.PI),r.fill(),r.restore()}},{key:"genInitData",value:function(){for(var t=[],e=this.cellWidth+this.lineWidth,i=0;i<this.rows;i++)for(var n=0;n<this.cols;n++){var r=(n+.5)*e,a=(i+.5)*e;t.push({row:i,col:n,x:r,y:a,num:0})}return t}},{key:"getCurrent",value:function(t){var e=this,i=Math.pow,n=(t.offsetX||t.pageX)*this.pixRatio,r=(t.offsetY||t.pageY)*this.pixRatio;return this.chessData.find(function(t){return!t.num&&i(n-t.x,2)+i(r-t.y,2)<i(e.chessRadius,2)})}}]),i}(),o=s;exports.default=o;
},{"../utils":"LN/f","./AIPlayer":"g65Z"}],"lgAh":[function(require,module,exports) {
"use strict";var e=n(require("./index"));function n(e){return e&&e.__esModule?e:{default:e}}var t=new e.default(null,{onGameover:function(e){alert("游戏结束：".concat(1===e?"白":"黑","方获胜！")),t.initUI()}});t.initUI();
},{"./index":"Focm"}]},{},["lgAh"], null)