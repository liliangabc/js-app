parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r},p.cache={};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({"7MKc":[function(require,module,exports) {

},{}],"LN/f":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={createStyleSheet:function(e){if(!document.getElementById("gameStyleSheet")){var t=document.createElement("style");t.type="text/css",t.id="gameStyleSheet",t.innerHTML=e,document.head.appendChild(t)}},createCanvas:function(e){e=e||document.body;var t=document.createElement("div"),a=document.createElement("canvas");return t.className="game-wrapper",a.className="game-ui",t.appendChild(a),e.appendChild(t),{wrapper:t,canvas:a}},getPixRatio:function(e){var t=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||1;return(window.devicePixelRatio||1)/t},isFunc:function(e){return"function"==typeof e},getRndInt:function(e,t){return Math.floor(Math.random()*(t-e+1)+e)}},t=e;exports.default=t;
},{}],"epB2":[function(require,module,exports) {
"use strict";var t=e(require("fs")),i=e(require("../utils"));function e(t){return t&&t.__esModule?t:{default:t}}function n(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function s(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,i,e){return i&&s(t.prototype,i),e&&s(t,e),t}i.default.createStyleSheet("* {\r\n  padding: 0;\r\n  margin: 0;\r\n  box-sizing: border-box;\r\n}\r\n\r\nbody {\r\n  background-color: #fbe9e7;\r\n}\r\n\r\n.game-wrapper {\r\n  max-width: 480px;\r\n  margin: auto;\r\n  position: relative;\r\n}\r\n\r\n.game-wrapper canvas.game-ui {\r\n  display: block;\r\n  width: 100%;\r\n  cursor: pointer;\r\n  -webkit-tap-highlight-color: transparent;\r\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);\r\n}");var a=function(){function t(i){var e=i.row,s=i.col,o=i.isSnake,a=void 0!==o&&o;n(this,t),this.row=e,this.col=s,this.isSnake=a}return o(t,[{key:"draw",value:function(t){var i=t.context,e=t.size,n=t.space,s=this.col*e+(this.col+1)*n,o=this.row*e+(this.row+1)*n;i.save(),i.fillStyle=this.isSnake?"#000":"#00f",i.fillRect(s,o,e,e),i.restore()}}]),t}(),r=function(){function t(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,t),this.callbacks=s;var o=i.default.createCanvas(e),a=o.wrapper,r=o.canvas;this.wrapper=a,this.canvas=r,this.context=this.canvas.getContext("2d"),this.pixRatio=i.default.getPixRatio(this.context),this.interval=300,this.addListener()}return o(t,[{key:"initUI",value:function(t){var i=t.rows,e=t.cols;this.rows=i||e,this.cols=e,this.score=0,this.blockSize=0,this.lineWidth=1,this.width=0,this.height=0,this.speed=1,this.arrow=1,this.mainTid=null,this.snake=this.initSnake(),this.food=this.initFood(),this.updateSize(),this.drawObjects(),this.timer()}},{key:"updateSize",value:function(){var t=this.canvas.offsetWidth;this.canvas.width=this.width=this.pixRatio*t,this.blockSize=(this.width-(this.cols+1)*this.lineWidth)/this.cols,this.canvas.height=this.height=this.rows*(this.blockSize+this.lineWidth)+this.lineWidth}},{key:"drawLines",value:function(){var t=this.context,i=this.lineWidth,e=this.blockSize,n=this.rows,s=this.cols,o=this.width,a=this.height,r=e+i;t.lineWidth=i,t.strokeStyle="#888";for(var h=0;h<=n;h++)t.moveTo(0,h*r+i/2),t.lineTo(o,h*r+i/2);for(var c=0;c<=s;c++)t.moveTo(c*r+i/2,0),t.lineTo(c*r+i/2,a);t.stroke()}},{key:"initSnake",value:function(){var t=Math.floor(this.rows/2)-1,i=Math.floor(this.cols/2);return[new a({row:t,col:i,isSnake:!0}),new a({row:t+1,col:i,isSnake:!0}),new a({row:t+2,col:i,isSnake:!0})]}},{key:"initFood",value:function(){for(var t=this,e=[],n=function(i,e){return t.snake.every(function(t){return t.row!==i||t.col!==e})},s=0;s<this.rows;s++)for(var o=0;o<this.cols;o++)n(s,o)&&e.push(new a({row:s,col:o}));return e[i.default.getRndInt(0,e.length-1)]}},{key:"drawSnake",value:function(){var t=this.context,i=this.blockSize,e=this.lineWidth;this.snake.forEach(function(n){return n.draw({context:t,size:i,space:e})})}},{key:"drawFood",value:function(){var t=this.context,i=this.blockSize,e=this.lineWidth;this.food.draw({context:t,size:i,space:e})}},{key:"drawObjects",value:function(){this.context.clearRect(0,0,this.width,this.height),this.drawLines(),this.drawFood(),this.drawSnake()}},{key:"eatFood",value:function(){if(this.canEat()){var t=this.callbacks.onScoreUpdated,e=this.food,n=e.row,s=e.col;this.snake.unshift(new a({row:n,col:s,isSnake:!0})),this.food=this.initFood(),this.drawObjects(),this.score++,i.default.isFunc(t)&&t(this.score),this.snake.length%10==0&&(this.speed+=.2,this.timer())}}},{key:"canEat",value:function(){var t=this.arrow,i=this.food,e=this.snake[0],n=e.row,s=e.col;return 1===t&&s===i.col&&n===i.row+1||2===t&&s===i.col-1&&n===i.row||3===t&&s===i.col&&n===i.row-1||4===t&&s===i.col+1&&n===i.row}},{key:"timer",value:function(){var t=this,e=this.callbacks.onEnded;clearInterval(this.mainTid);var n=Math.floor(this.interval/this.speed);this.mainTid=setInterval(function(){t.isEnd()?(clearInterval(t.mainTid),i.default.isFunc(e)&&e(t.score)):t.moveSnake(),t.eatFood()},n)}},{key:"moveSnake",value:function(){this[["moveUp","moveRight","moveDown","moveLeft"][this.arrow-1]](),this.drawObjects()}},{key:"moveUp",value:function(){var t=this.snake[0],i=t.row,e=t.col;this.snake.unshift(new a({row:i-1,col:e,isSnake:!0})),this.snake.pop()}},{key:"moveRight",value:function(){var t=this.snake[0],i=t.row,e=t.col;this.snake.unshift(new a({row:i,col:e+1,isSnake:!0})),this.snake.pop()}},{key:"moveDown",value:function(){var t=this.snake[0],i=t.row,e=t.col;this.snake.unshift(new a({row:i+1,col:e,isSnake:!0})),this.snake.pop()}},{key:"moveLeft",value:function(){var t=this.snake[0],i=t.row,e=t.col;this.snake.unshift(new a({row:i,col:e-1,isSnake:!0})),this.snake.pop()}},{key:"isEnd",value:function(){var t=this.arrow,i=this.rows,e=this.cols,n=this.snake[0],s=n.row,o=n.col;return 1===t&&0===s||2===t&&o===e-1||3===t&&s===i-1||4===t&&0===o}},{key:"addListener",value:function(){this.canvas.addEventListener("click",this.onClick.bind(this))}},{key:"onClick",value:function(t){var i=(t.offsetX||t.pageX)*this.pixRatio,e=(t.offsetY||t.pageY)*this.pixRatio,n=this.snake[0],s=n.row,o=n.col,a=this.blockSize,r=this.lineWidth,h=this.arrow,c=o*a+(o+1)*r,l=s*a+(s+1)*r;1===h||3===h?i>c+a?this.arrow=2:i<c&&(this.arrow=4):2!==h&&4!==h||(e>l+a?this.arrow=3:e<l&&(this.arrow=1)),this.eatFood()}}]),t}(),h={cols:20},c=new r(null,{onEnded:function(t){confirm("不好意思，你挂了！ 你的得分：".concat(t,"; 要重新开始吗？"))&&c.initUI(h)},onScoreUpdated:function(t){}});c.initUI(h);
},{"fs":"7MKc","../utils":"LN/f"}]},{},["epB2"], null)